<h1>Eat-Da-Burger !</h1>

<ul>
    {{#each burgers}}
    <li>
        <p>
            {{this.id}}.{{this.burger_name}}

            <button data-burgerid="{{this.id}}" class="devour">Devour it</button>
        </p>
    </li>
    {{/each}}
</ul>

<form id="addburger" class="button-size">
    <textarea type="text" name="burger"></textarea>
    <button type="submit">Submit</button>
</form>

<form id="updateburger" class="button-size">
    <button type="submit">Devour It</button>
</form>

<script type="text/javascript">
$("#addburger").on("submit", function(event) {
    //Make sure to prevent Default on a submit event
    event.preventDefault();

    var newBurger = {
        burger: $("#addburger [name=burger]").val().trim()
    };

    //Send the POST request
    $.ajax("/burgers", {
        type: "POST",
        data: newBurger
    }).then(
        function() {
            console.log("added new burger");
            // Reload the page to get the updated list
            location.reload();
        }
    );
});

$("#updateburger").on("submit", function(event) {
    // Make sure to preventDefault on a submit event
    event.preventDefault();

    var id = $("[name=id]").val().trim()

    var updatedBurger = {
        burger: $("#updateburger [name=burger]").val().trim()
    };

    // Send the PUT request
    $.ajax("/burgers/" + id, {
        type: "PUT",
        data: updatedBurger
    }).then(
        function() {
            console.log("updated id ", id);
            // Reload the page to get the updated list
            location.reload();
        }
    );
});
</script>